{% extends "blog/base.html" %}

{% block content %}
    <h2>
        {% if search_query %}
            Search Results for "{{ search_query }}"
        {% elif tag_name %}
            Posts Tagged with "{{ tag_name }}"
        {% else %}
            Search Results
        {% endif %}
    </h2>

    {% if posts %}
        {% for post in posts %}
            <article class="post">
                <h3><a href="{% url 'post-detail' pk=post.pk %}">{{ post.title }}</a></h3>
                <p>By {{ post.author.username }} on {{ post.published_date|date:"F d, Y" }}</p>
                <p>{{ post.content|truncatewords:50 }}</p>
                
                <div class="post-tags">
                    <strong>Tags:</strong>
                    {% for tag in post.tags.all %}
                        <a href="{% url 'posts-by-tag' tag.slug %}" class="tag-link">{{ tag.name }}</a>
                    {% endfor %}
                </div>
                <hr>
            </article>
        {% endfor %}
    {% else %}
        <p>No posts matched your criteria.</p>
    {% endif %}

    {% comment %} Pagination goes here if needed {% endcomment %}

{% endblock content %}